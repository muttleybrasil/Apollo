<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Apollo Produções</title>
        <link rel="stylesheet" href="../vendor/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../vendor/font-awesome/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href="../vendor/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" />
        <link rel="stylesheet" href="styles/style.css" rel="stylesheet">
    </head>
    <body data-ng-app="apolloApp" data-ng-controller="MainController as ctrl">
        <div id="wrapper">
            <div data-ng-include="'views/nav.htm'"></div>
            <div id="page-wrapper" class="gray-bg dashbard-1">
                <div class="row border-bottom">
                    <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                        <div class="navbar-header">
                            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                            <form role="search" class="navbar-form-custom" action="search_results.html">
                                <div class="form-group">
                                    <input type="text" placeholder="Pesquisar..." class="form-control" name="top-search" id="top-search">
                                </div>
                            </form>
                        </div>
                    </nav>
                </div>

                <div class="row  border-bottom white-bg dashboard-header">
                    <div data-ng-view=""></div>
                </div>
            </div>
        </div>
        <!-- thirdpart -->
        <script src="../vendor/jquery/dist/jquery.min.js"></script>
        <script src="../vendor/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../vendor/angular/angular.min.js"></script>
        <script src="../vendor/angular-route/angular-route.min.js"></script>
        <script src="../vendor/angular-ui-bootstrap/ui-bootstrap-tpls.min.js"></script>
        <script src="../vendor/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
        <script src="../vendor/bootstrap-datepicker/js/locales/bootstrap-datepicker.pt-BR.js"></script>
        <!-- /thirdpart -->
        <script>
            var apolloApp = angular
                    .module('apolloApp', ['ngRoute', 'ui.bootstrap'])
                    .config(function ($httpProvider, $routeProvider) {
                        // Use x-www-form-urlencoded Content-Type
                        $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';
                        $httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';
                        /**
                         * The workhorse; converts an object to x-www-form-urlencoded serialization.
                         * @param {Object} obj
                         * @return {String}
                         */
                        var param = function (obj) {
                            var query = '', name, value, fullSubName, subName, subValue, innerObj, i;
                            for (name in obj) {
                                value = obj[name];
                                if (value instanceof Array) {
                                    for (i = 0; i < value.length; ++i) {
                                        subValue = value[i];
                                        fullSubName = name + '[' + i + ']';
                                        innerObj = {};
                                        innerObj[fullSubName] = subValue;
                                        query += param(innerObj) + '&';
                                    }
                                } else if (value instanceof Object) {
                                    for (subName in value) {
                                        subValue = value[subName];
                                        fullSubName = name + '[' + subName + ']';
                                        innerObj = {};
                                        innerObj[fullSubName] = subValue;
                                        query += param(innerObj) + '&';
                                    }
                                } else if (value !== undefined && value !== null) {
                                        query += encodeURIComponent(name) + '=' + encodeURIComponent(value) + '&';
                                }
                            }
                            return query.length ? query.substr(0, query.length - 1) : query;
                        };
                        // Override $http service's default transformRequest
                        $httpProvider.defaults.transformRequest = [function (data) {
                                return angular.isObject(data) && String(data) !== '[object File]' ? param(data) : data;
                        }];
                        $routeProvider
                            .when('/evento', { templateUrl: 'views/evento-grid.htm', controller: 'EventoGridController', controllerAs: 'ctrl' })
                            .when('/evento/adicionar', { templateUrl: 'views/evento-form.htm', controller: 'EventoFormController', controllerAs: 'ctrl' })
                            .otherwise({ redirectTo: '/home.htm' });
                    });

            apolloApp.controller("MainController", function(
                $rootScope, $scope, $http, $location, BASE_URL
            ) {
                var ctrl = this;

                // controle de menu "active"
                $scope.$watch(function() {
                    return $location.path();
                }, function(){
                    
                });

                $scope.testIndexof = function (list, object, attribute) {
                    attribute = attribute !== undefined ? attribute : 'id';
                    for (var index = 0; index < list.length; index++) {
                        if (list[index][attribute] === object[attribute]) {
                            return true;
                        }
                    }
                    return false;
                };
            });
            
            // wrapper
            $( document ).ready(function() {
                $('#page-wrapper').css('min-height', $(document).height());
            });
        </script>
        <!-- Constants -->
        <script src="scripts/constants.js"></script>
        <!-- Controllers -->
        <script src="scripts/controllers/navigation-controller.js"></script>
        <script src="scripts/controllers/evento-grid-controller.js"></script>
        <script src="scripts/controllers/evento-form-controller.js"></script>
        <!-- Services -->
        <!-- script src="../comum/scripts/services/atividade-service.js"></script -->
        <!-- Models -->
        <!-- script src="../comum/scripts/models/atividade-model.js"></script -->
    </body>
</html>